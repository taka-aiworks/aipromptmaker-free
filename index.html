<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AI プロンプトメーカー 無料版 – 基本情報で簡単プロンプト生成</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" type="image/x-icon" href="image/favicon.ico">

  <meta name="description" content="AIプロンプトメーカー 無料版 – キャラの基本情報設定でプロンプトを簡単生成。プロ版では学習・量産・撮影モードも利用可能。">

  <meta property="og:title" content="AIプロンプトメーカー 無料版" />
  <meta property="og:description" content="キャラの基本情報でプロンプトを簡単生成できる無料版WebApp" />
  <meta property="og:image" content="image/ogp.png" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="AIプロンプトメーカー 無料版" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="AIプロンプトメーカー 無料版" />
  <meta name="twitter:description" content="キャラの基本情報でプロンプトを簡単生成できる無料版WebApp" />
  <meta name="twitter:image" content="image/ogp.png" />

  <style>
    /* プロ版制限エリアのスタイル */
    .pro-only-overlay {
      position: relative;
      pointer-events: none;
      opacity: 0.3;
    }
    
    .pro-only-banner {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: linear-gradient(135deg, #ff6b35, #f7931e);
      color: white;
      padding: 20px 30px;
      border-radius: 12px;
      box-shadow: 0 8px 25px rgba(255, 107, 53, 0.3);
      text-align: center;
      z-index: 10;
      pointer-events: auto;
      min-width: 300px;
    }
    
    .pro-only-banner h3 {
      margin: 0 0 10px;
      font-size: 1.2em;
      font-weight: bold;
    }
    
    .pro-only-banner p {
      margin: 0 0 15px;
      font-size: 0.9em;
      line-height: 1.4;
    }
    
    .pro-upgrade-btn {
      background: white;
      color: #ff6b35;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
      text-decoration: none;
      display: inline-block;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    
    .pro-upgrade-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    /* ヘッダーのプロ版ボタン */
    .header-pro-btn {
      background: linear-gradient(135deg, #ff6b35, #f7931e);
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 20px;
      font-weight: bold;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 5px;
      transition: transform 0.2s, box-shadow 0.2s;
      font-size: 0.9em;
    }
    
    .header-pro-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(255, 107, 53, 0.3);
    }
    
    .header-pro-btn::before {
      content: "⭐";
    }

    /* 無料版バッジ */
    .free-badge {
      background: #28a745;
      color: white;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 0.8em;
      font-weight: bold;
      margin-left: 8px;
    }

    /* タブの制限表示 */
    .tab.disabled {
      opacity: 0.6;
      position: relative;
    }
    
    .tab.disabled::after {
      content: "🔒";
      margin-left: 5px;
      font-size: 0.8em;
    }

    /* 無料版制限表示 */
    .free-limit-note {
      background: #e8f4fd;
      border: 1px solid #bee5eb;
      border-radius: 6px;
      padding: 8px 12px;
      margin: 8px 0;
      color: #0c5460;
      font-size: 0.9em;
    }
  </style>
</head>
<body>
  <div class="header">
    <div class="inner">
      <div class="tabbar">
        <div class="tab active" data-mode="basic">👤 基本情報<span class="free-badge">FREE</span></div>
        <div class="tab" data-mode="shooting">📷 簡易撮影<span class="free-badge">FREE</span></div>
        <div class="tab disabled" data-mode="word">📖 単語モード</div>
        <div class="tab disabled" data-mode="learning">🧠 LoRA学習モード</div>
        <div class="tab disabled" data-mode="production">📦 量産モード</div>
        <div class="tab disabled" data-mode="settings">⚙️ 設定</div>
      </div>
      <div class="row mini">
        <span id="status" class="status mini">状態: 内蔵辞書 / 18禁: <b id="nsfwState">OFF</b></span>
        <a href="#pro-version" class="header-pro-btn">プロ版はこちら</a>
      </div>
    </div>
  </div>

  <main class="container">
    <!-- 基本情報（無料版で利用可能） -->
    <section id="panelBasic" class="card">
      <div class="header-row">
        <h2 class="card-title">キャラの基本情報 <span class="free-badge">FREE</span></h2>
      </div>

      <div class="note mini">
        髪/瞳/肌・髪型・目の形・服・<b>服カラー</b>はここで固定。<br>
        <strong>無料版では基本情報の設定とテスト生成、簡易撮影モードをご利用いただけます。</strong>
      </div>

      <!-- テキスト属性（SFW基礎） -->
      <div class="panel">
        <h2 style="margin-top:18px">テキスト属性（SFW基礎）</h2>
        <!-- 1段目：年齢・性別・体型・身長 -->
        <div class="grid g4" style="margin-top:8px">
          <div class="panel">
            <h3>年齢</h3>
            <div id="bf_age" class="scroller"></div>
          </div>
          <div class="panel">
            <h3>性別</h3>
            <div id="bf_gender" class="scroller"></div>
          </div>
          <div class="panel">
            <h3>体型</h3>
            <div id="bf_body" class="scroller"></div>
          </div>
          <div class="panel">
            <h3>身長</h3>
            <div id="bf_height" class="scroller"></div>
          </div>
          <div class="panel">
            <h3>髪型</h3>
            <div id="hairStyle" class="scroller"></div>
          </div>
          <div class="panel">
            <h3>目の形</h3>
            <div id="eyeShape" class="scroller"></div>
          </div>
        </div>

        <!-- 色：髪/瞳/肌 -->
        <div class="grid g3" style="margin-top:10px">
          <div class="panel">
            <h3>髪色</h3>
            <div class="wheel-box">
              <div id="wheelH" class="wheel"></div><div id="thumbH" class="thumb"></div>
            </div>
            <label class="row mini">S: <input id="satH" type="range" min="0" max="100" value="70">
              L: <input id="litH" type="range" min="0" max="100" value="45"></label>
            <div class="row mini"><div id="swH" class="swatch"></div>
              <span>タグ: <code class="tag" id="tagH">brown hair</code></span></div>
          </div>

          <div class="panel">
            <h3>瞳色</h3>
            <div class="wheel-box">
              <div id="wheelE" class="wheel"></div><div id="thumbE" class="thumb"></div>
            </div>
            <label class="row mini">S: <input id="satE" type="range" min="0" max="100" value="80">
              L: <input id="litE" type="range" min="0" max="100" value="55"></label>
            <div class="row mini"><div id="swE" class="swatch"></div>
              <span>タグ: <code class="tag" id="tagE">blue eyes</code></span></div>
          </div>

          <div class="panel">
            <h3>肌トーン</h3>
            <input id="skinTone" type="range" min="0" max="100" value="30">
            <div class="row mini"><div id="swSkin" class="swatch"></div>
              <span>タグ: <code class="tag" id="tagSkin">fair skin</code></span></div>
          </div>
        </div>

        <fieldset id="fsSeparates">
          <div class="panel" id="panel_outfitFixed">
            <h3>服（固定 / 上下 or ワンピース）</h3>

            <div class="row mini" style="gap:10px;margin:6px 0 8px">
              <label class="inline">
                <input type="radio" name="outfitMode" value="separate" id="outfitModeSeparate" checked>
                上下コーデ
              </label>
              <label class="inline">
                <input type="radio" name="outfitMode" value="onepiece" id="outfitModeDress">
                ワンピース
              </label>
              <span class="mini">※ ワンピース選択時は「下カラー」は自動で無効</span>
            </div>

            <fieldset id="fsSeparates">
              <div class="grid g4">
                <div class="panel">
                  <h4 style="margin:0 0 6px">トップス（1つ）</h4>
                  <div id="outfit_top" class="scroller"></div>
                </div>

                <div class="panel">
                  <h4 style="margin:0 0 6px">ワンピース（1つ）</h4>
                  <fieldset id="fsDress" disabled>
                    <div id="outfit_dress" class="scroller"></div>
                    <div class="mini">選択時は「下カラー」は自動で無効</div>
                  </fieldset>
                </div>

                <div class="panel">
                  <h4 style="margin:0 0 6px">下カテゴリ</h4>
                  <div class="row mini" id="bottomCategoryRadios" style="gap:10px">
                    <label class="inline"><input type="radio" name="bottomCat" id="bottomCat_pants" value="pants" checked> ボトムス（ズボン）</label>
                    <label class="inline"><input type="radio" name="bottomCat" id="bottomCat_skirt" value="skirt"> スカート</label>
                  </div>

                  <fieldset id="fsBottom_pants" class="swap-target" style="margin-top:8px">
                    <h4 class="mini" style="margin:0 0 6px">ボトムス（ズボン・1つ）</h4>
                    <div id="outfit_pants" class="scroller"></div>
                  </fieldset>

                  <fieldset id="fsBottom_skirt" class="swap-target" style="margin-top:8px">
                    <h4 class="mini" style="margin:0 0 6px">スカート（1つ）</h4>
                    <div id="outfit_skirt" class="scroller"></div>
                  </fieldset>
                </div>

                <div class="panel">
                  <h4 style="margin:0 0 6px">靴（1つ選択）</h4>
                  <div id="outfit_shoes" class="scroller"></div>
                  <div class="mini">※ 学習時にはノイズになる可能性があります</div>
                </div>
              </div>
            </fieldset>
          </div>

          <!-- カラー指定（固定） -->
          <div class="card" style="margin-top:10px">
            <h4 style="margin:0 0 6px">服カラー（固定）</h4>
            <div class="mini">トップス / ボトムス / 靴。未操作＝色タグなし。ワンピース選択時は下は無効。</div>

            <div class="grid g3" id="grid_fixed_colors" style="margin-top:8px">
              <div class="panel" id="panel_top">
                <div class="row mini">
                  <label class="inline"><input type="checkbox" id="use_top" checked> トップス色を使う</label>
                </div>
                <div class="wheel-box">
                  <div id="wheel_top" class="wheel"></div><div id="thumb_top" class="thumb"></div>
                </div>
                <div class="row mini">
                  S:<input id="sat_top" type="range" min="0" max="100" value="80">
                  L:<input id="lit_top" type="range" min="0" max="100" value="55">
                </div>
                <div class="row mini">
                  <div id="sw_top" class="swatch"></div>
                  <span>色タグ: <code class="tag" id="tag_top">—</code></span>
                </div>
              </div>

              <div class="panel" id="panel_bottom">
                <div class="row mini">
                  <label class="inline"><input type="checkbox" id="useBottomColor" checked> 下カラーを使う（ズボン/スカート共通）</label>
                </div>
                <div class="wheel-box">
                  <div id="wheel_bottom" class="wheel"></div><div id="thumb_bottom" class="thumb"></div>
                </div>
                <div class="row mini">
                  S:<input id="sat_bottom" type="range" min="0" max="100" value="70">
                  L:<input id="lit_bottom" type="range" min="0" max="100" value="50">
                </div>
                <div class="row mini">
                  <div id="sw_bottom" class="swatch"></div>
                  <span>色タグ: <code class="tag" id="tag_bottom">—</code></span>
                </div>
                <div class="mini">※ ワンピース選択時は自動で無効化されます</div>
              </div>

              <div class="panel" id="panel_shoes">
                <div class="row mini">
                  <label class="inline"><input type="checkbox" id="use_shoes"> 靴色を使う</label>
                </div>
                <div class="wheel-box">
                  <div id="wheel_shoes" class="wheel"></div><div id="thumb_shoes" class="thumb"></div>
                </div>
                <div class="row mini">
                  S:<input id="sat_shoes" type="range" min="0" max="100" value="0">
                  L:<input id="lit_shoes" type="range" min="0" max="100" value="30">
                </div>
                <div class="row mini">
                  <div id="sw_shoes" class="swatch"></div>
                  <span>色タグ: <code class="tag" id="tag_shoes">—</code></span>
                </div>
              </div>
            </div>
          </div>

          <div class="panel">
            <h3>キャラ識別</h3>
            <label>キャラ名（seed固定）</label>
            <input id="charName" type="text" placeholder="例: Akari_v1">
            <label style="margin-top:8px">LoRAタグ（任意）</label>
            <input id="loraTag" type="text" placeholder="<lora:YourLoRA:0.8>">
          </div>

          <!-- 1枚テスト（無料版でも利用可能） -->
          <div id="slotBasicOneTest">
            <div class="card" id="learnTestCard">
              <div class="row">
                <div id="readyHint" class="mini muted" style="margin-top:.25rem;"></div>
                <h3 style="margin:0">1枚テスト <span class="free-badge">FREE</span></h3><span style="flex:1"></span>
                <label class="inline mini">出力フォーマット
                  <select id="fmtLearn">
                    <option value="a1111" selected>Web UI（汎用）</option>
                    <option value="invoke">InvokeAI（CLI）</option>
                    <option value="comfy">ComfyUI（テキスト）</option>
                    <option value="sdnext">SD.Next（dream.py）</option>
                    <option value="nai">NovelAI</option>
                  </select>
                </label>
                <button id="btnOneLearn" class="btn ok">テスト生成</button>
              </div>

              <div class="grid g4" style="margin-top:10px">
                <div>
                  <div class="mini" style="margin:0 0 .35rem">全部</div>
                  <div class="out" id="outLearnTestAll"></div>
                  <button id="btnCopyLearnTestAll" class="btn ghost small" style="margin-top:6px">全部をコピー</button>
                </div>
                <div>
                  <div class="mini" style="margin:0 0 .35rem">Promptのみ</div>
                  <div class="out" id="outLearnTestPrompt"></div>
                  <button id="btnCopyLearnTestPrompt" class="btn ghost small" style="margin-top:6px">Promptだけコピー</button>
                </div>
                <div>
                  <div class="mini" style="margin:0 0 .35rem">Negativeのみ</div>
                  <div class="out" id="outLearnTestNeg"></div>
                  <button id="btnCopyLearnTestNeg" class="btn ghost small" style="margin-top:6px">Negativeだけコピー</button>
                </div>
                <div>
                  <div class="mini" style="margin:0 0 .35rem">キャプション用</div>
                  <div class="out" id="outLearnTestCaption"></div>
                  <button id="btnCopyLearnTestCaption" class="btn ghost small" style="margin-top:6px">キャプションをコピー</button>
                </div>
              </div>
            </div>
          </div>
        </fieldset>
      </div>
    </section>

    <!-- 簡易撮影モード（無料版で利用可能） -->
    <section id="panelShooting" class="card" hidden>
      <div class="header-row">
        <h2 class="card-title">簡易撮影モード <span class="free-badge">FREE</span></h2>
      </div>
      
      <div class="free-limit-note">
        <strong>📷 無料版の制限:</strong> 各カテゴリから1つずつのみ選択可能。プロ版では複数選択・ランダム生成・NSFW要素・量産機能をご利用いただけます。
      </div>

      <div class="grid g2">
        <div class="panel">
          <div class="row mini"><b>背景（1つ選択）</b></div>
          <div id="s_bg" class="scroller"></div>
        </div>
        <div class="panel">
          <div class="row mini"><b>ポーズ（1つ選択）</b></div>
          <div id="s_pose" class="scroller"></div>
        </div>
        <div class="panel">
          <div class="row mini"><b>構図（1つ選択）</b></div>
          <div id="s_comp" class="scroller"></div>
        </div>
        <div class="panel">
          <div class="row mini"><b>視点（1つ選択）</b></div>
          <div id="s_view" class="scroller"></div>
        </div>
        <div class="panel">
          <div class="row mini"><b>表情（1つ選択）</b></div>
          <div id="s_expr" class="scroller"></div>
        </div>
        <div class="panel">
          <div class="row mini"><b>ライティング（1つ選択）</b></div>
          <div id="s_light" class="scroller"></div>
        </div>
      </div>

      <hr class="sep">

      <div class="panel">
        <h3>固定タグ / ネガティブ</h3>
        <label>固定タグ（先頭に付与）</label>
        <textarea id="fixedShooting" rows="2" placeholder="例: masterpiece, best quality"></textarea>
        <div class="note mini" style="margin-top:6px">
          ※ 基本情報の設定内容は自動で含まれます
        </div>
      </div>

      <div class="row" style="gap:8px;margin-top:10px">
        <button id="btnShootingOne" class="btn ok">撮影モード生成</button>
        <label class="inline mini">出力フォーマット
          <select id="fmtShooting">
            <option value="a1111" selected>Web UI（汎用）</option>
            <option value="invoke">InvokeAI（CLI）</option>
            <option value="comfy">ComfyUI（テキスト）</option>
            <option value="sdnext">SD.Next（dream.py）</option>
            <option value="nai">NovelAI</option>
          </select>
        </label>
        <span style="flex:1"></span>
      </div>
      
      <div class="grid g4" style="margin-top:10px">
        <div>
          <div class="mini" style="margin:0 0 .35rem">全部</div>
          <div class="out" id="outShootingAll"></div>
          <button id="btnCopyShootingAll" class="btn ghost small" style="margin-top:6px">全部をコピー</button>
        </div>
        <div>
          <div class="mini" style="margin:0 0 .35rem">Promptのみ</div>
          <div class="out" id="outShootingPrompt"></div>
          <button id="btnCopyShootingPrompt" class="btn ghost small" style="margin-top:6px">Promptだけコピー</button>
        </div>
        <div>
          <div class="mini" style="margin:0 0 .35rem">Negativeのみ</div>
          <div class="out" id="outShootingNeg"></div>
          <button id="btnCopyShootingNeg" class="btn ghost small" style="margin-top:6px">Negativeだけコピー</button>
        </div>
        <div>
          <div class="mini" style="margin:0 0 .35rem">キャプション用</div>
          <div class="out" id="outShootingCaption"></div>
          <button id="btnCopyShootingCaption" class="btn ghost small" style="margin-top:6px">キャプションをコピー</button>
        </div>
      </div>
    </section>

    <!-- プロ版限定タブ（制限表示） -->
    <section id="panelWordMode" class="card pro-only-overlay" hidden>
      <div class="pro-only-banner">
        <h3>🔒 単語モード（プロ版限定）</h3>
        <p>辞書からカテゴリ別に単語を選び、最大20件まで蓄積・コピーできる高度な機能です。NSFW要素や高度な分類機能も含みます。</p>
        <a href="#pro-version" class="pro-upgrade-btn">プロ版にアップグレード</a>
      </div>
      <div style="padding: 40px; color: #999;">
        <h2>単語モード</h2>
        <p>この機能はプロ版でのみご利用いただけます...</p>
      </div>
    </section>

    <section id="panelLearning" class="card pro-only-overlay" hidden>
      <div class="pro-only-banner">
        <h3>🔒 LoRA学習モード（プロ版限定）</h3>
        <p>LoRA学習用の統一性のあるプロンプトセットを自動生成。配分ルールによる最適化機能やNSFW要素対応。</p>
        <a href="#pro-version" class="pro-upgrade-btn">プロ版にアップグレード</a>
      </div>
      <div style="padding: 40px; color: #999;">
        <h2>LoRA学習モード（バリエーション）</h2>
        <p>この機能はプロ版でのみご利用いただけます...</p>
      </div>
    </section>

    <section id="panelProduction" class="card pro-only-overlay" hidden>
      <div class="pro-only-banner">
        <h3>🔒 量産モード（プロ版限定）</h3>
        <p>LoRA完成後の多様性重視の量産プロンプト生成。アクセ3枠、複数選択、NSFW要素など高機能。</p>
        <a href="#pro-version" class="pro-upgrade-btn">プロ版にアップグレード</a>
      </div>
      <div style="padding: 40px; color: #999;">
        <h2>量産モード（LoRA完成後）</h2>
        <p>この機能はプロ版でのみご利用いただけます...</p>
      </div>
    </section>

    <section id="panelSettings" class="card pro-only-overlay" hidden>
      <div class="pro-only-banner">
        <h3>🔒 設定（プロ版限定）</h3>
        <p>クラウド保存、辞書I/O、高度な設定管理機能をご利用いただけます。</p>
        <a href="#pro-version" class="pro-upgrade-btn">プロ版にアップグレード</a>
      </div>
      <div style="padding: 40px; color: #999;">
        <h2>⚙️ 設定</h2>
        <p>この機能はプロ版でのみご利用いただけます...</p>
      </div>
    </section>

    <!-- プロ版案内セクション -->
    <section id="pro-version" class="card" style="background: linear-gradient(135deg, #ff6b35, #f7931e); color: white; margin-top: 30px;">
      <h2 style="color: white; margin-top: 0;">⭐ AI プロンプトメーカー Pro版</h2>
      <div class="grid g2">
        <div>
          <h3 style="color: white;">Pro版の機能</h3>
          <ul style="line-height: 1.6;">
            <li><strong>📖 単語モード</strong> - 辞書から自由に単語を選んでプロンプト作成</li>
            <li><strong>📷 フル撮影モード</strong> - 複数選択・ランダム生成・NSFW要素対応</li>
            <li><strong>🧠 LoRA学習モード</strong> - 統一性のある学習用プロンプトセット生成</li>
            <li><strong>📦 量産モード</strong> - 多様性重視の大量プロンプト生成</li>
            <li><strong>⚙️ 高度な設定</strong> - クラウド保存、辞書I/O、詳細設定</li>
            <li><strong>🎨 色指定機能</strong> - 複数箇所の色ピッカー</li>
            <li><strong>📊 CSV出力</strong> - 生成結果の一括保存</li>
            <li><strong>🔞 R-18対応</strong> - レベル別NSFW要素対応</li>
          </ul>
        </div>
        <div>
          <h3 style="color: white;">無料版との比較</h3>
          <table style="width: 100%; background: rgba(255,255,255,0.1); border-radius: 8px; padding: 15px;">
            <tr><th>機能</th><th>無料版</th><th>Pro版</th></tr>
            <tr><td>基本情報設定</td><td>✅</td><td>✅</td></tr>
            <tr><td>1枚テスト生成</td><td>✅</td><td>✅</td></tr>
            <tr><td>簡易撮影モード</td><td>✅ 1つずつ</td><td>✅ 複数選択</td></tr>
            <tr><td>単語モード</td><td>❌</td><td>✅</td></tr>
            <tr><td>学習モード</td><td>❌</td><td>✅</td></tr>
            <tr><td>量産モード</td><td>❌</td><td>✅</td></tr>
            <tr><td>NSFW要素</td><td>❌</td><td>✅</td></tr>
            <tr><td>設定・保存</td><td>❌</td><td>✅</td></tr>
          </table>
          <div style="text-align: center; margin-top: 20px;">
            <a href="#purchase-link" style="background: white; color: #ff6b35; padding: 15px 30px; border-radius: 25px; text-decoration: none; font-weight: bold; display: inline-block; transform: translateY(0); transition: transform 0.2s;">
              🛒 Pro版を購入する
            </a>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script src="app.js" defer></script>
  <script>
    // 無料版用のタブ切り替え機能
    document.addEventListener('DOMContentLoaded', function() {
      const tabs = document.querySelectorAll('.tab');
      
      tabs.forEach(tab => {
        tab.addEventListener('click', function(e) {
          const mode = this.dataset.mode;
          
          // プロ版限定タブの制限
          if (this.classList.contains('disabled')) {
            e.preventDefault();
            const featureName = this.textContent.replace('🔒', '').trim();
            alert(`🔒 ${featureName}はプロ版限定機能です\n\nプロ版では以下の機能をご利用いただけます：\n• 単語モード - 辞書から自由選択\n• フル撮影モード - 複数選択・NSFW対応\n• 学習モード - LoRA用プロンプトセット\n• 量産モード - 大量プロンプト生成\n• 高度な設定 - クラウド保存等\n\nプロ版のご購入をご検討ください。`);
            return false;
          }
          
          // 利用可能なタブの切り替え
          tabs.forEach(t => t.classList.remove('active'));
          this.classList.add('active');
          
          document.getElementById('panelBasic').hidden = (mode !== 'basic');
          document.getElementById('panelShooting').hidden = (mode !== 'shooting');
          document.getElementById('panelWordMode').hidden = (mode !== 'word');
          document.getElementById('panelLearning').hidden = (mode !== 'learning');
          document.getElementById('panelProduction').hidden = (mode !== 'production');
          document.getElementById('panelSettings').hidden = (mode !== 'settings');
        });
      });
      
      // プロ版ボタンのクリックイベント
      document.querySelectorAll('a[href="#pro-version"], .pro-upgrade-btn').forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          document.getElementById('pro-version').scrollIntoView({ behavior: 'smooth' });
        });
      });
      
  document.querySelectorAll('a[href="#purchase-link"]').forEach(link => {
    link.addEventListener('click', function(e) {
      e.preventDefault();
      // Pro版の購入ページを新しいタブで開く
      window.open('https://note.com/taka_aiworks/n/n2649a6548cad', '_blank');
    });
  });
});
    
    // 基本情報タブのスクリプト（元のコードから必要部分を抜粋）
    (() => {
      const scope = document.getElementById('panelBasic');
      if (!scope) return;
    
      // グローバルの $ / $$ を壊さないために別名を使用
      const qs  = (sel) => scope.querySelector(sel);
      const qsa = (sel) => Array.from(scope.querySelectorAll(sel)); // ←必ず配列化
    
      const getIsOnepiece = () => {
        const r = qs('input[name="outfitMode"]:checked');
        return r?.value === 'onepiece';
      };
    
      const setDisabledDeep = (root, on) => {
        if (!root) return;
        root.classList.toggle('is-disabled', !!on);
        root.querySelectorAll('input, select, textarea, button, fieldset')
            .forEach(el => { el.disabled = !!on; });
      };
    
      const updateBottomCategory = () => {
        const selectedCat = qs('input[name="bottomCat"]:checked')?.value || 'pants';
        const fsPants = qs('#fsBottom_pants');
        const fsSkirt = qs('#fsBottom_skirt');
        if (fsPants && fsSkirt) {
          if (selectedCat === 'pants') {
            fsPants.style.display = '';
            fsSkirt.style.display = 'none';
            fsSkirt.querySelectorAll('input[type="radio"]').forEach(r => r.checked = false);
          } else {
            fsPants.style.display = 'none';
            fsSkirt.style.display = '';
            fsPants.querySelectorAll('input[type="radio"]').forEach(r => r.checked = false);
          }
        }
      };
    
      const applyOutfitMode = () => {
        const isOnepiece = getIsOnepiece();
        const fsDress    = qs('#fsDress');
        const dressPanel = qs('#fsDress')?.closest('.panel');
        const topPanel   = qs('#outfit_top')?.closest('.panel');
        const fsPants    = qs('#fsBottom_pants');
        const fsSkirt    = qs('#fsBottom_skirt');
        const bottomCat  = qs('#bottomCategoryRadios')?.closest('.panel');
        const shoesPanel = qs('#outfit_shoes')?.closest('.panel');
    
        if (isOnepiece) {
          setDisabledDeep(fsDress, false);
          if (dressPanel) setDisabledDeep(dressPanel, false);
          if (shoesPanel) setDisabledDeep(shoesPanel, false);
          setDisabledDeep(topPanel, true);
          setDisabledDeep(fsPants, true);
          setDisabledDeep(fsSkirt, true);
          setDisabledDeep(bottomCat, true);
        } else {
          setDisabledDeep(topPanel, false);
          setDisabledDeep(fsPants, false);
          setDisabledDeep(fsSkirt, false);
          setDisabledDeep(bottomCat, false);
          if (shoesPanel) setDisabledDeep(shoesPanel, false);
          setDisabledDeep(fsDress, true);
          if (dressPanel) setDisabledDeep(dressPanel, true);
        }
        updateBottomCategory();
      };
    
      // outfitMode ラジオ: 変更で切替
      qsa('#panel_outfitFixed input[name="outfitMode"]').forEach(r => {
        r.addEventListener('change', applyOutfitMode);
        r.addEventListener('input',  applyOutfitMode);
      });
    
      // bottomCat ラジオ: パンツ/スカート切替
      qsa('input[name="bottomCat"]').forEach(radio => {
        radio.addEventListener('change', updateBottomCategory);
      });
    
      applyOutfitMode();
      window.addEventListener('pageshow', applyOutfitMode);
    
      // デバッグ用（必要なければ削除OK）
      window.applyOutfitMode      = applyOutfitMode;
      window.updateBottomCategory = updateBottomCategory;
    })();
  </script>
</body>
</html>
